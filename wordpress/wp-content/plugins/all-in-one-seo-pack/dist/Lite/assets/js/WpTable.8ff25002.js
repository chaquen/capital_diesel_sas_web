import{e as o,a as n,b as u,m as l}from"./index.4776f7d5.js";import{a as m,S as p}from"./index.4a5acef5.js";import{c as _}from"./attachments.52d4e34c.js";import{n as f}from"./vueComponentNormalizer.58b0a173.js";const y={computed:{...o(["isUnlicensed"]),shouldShowMain(){return!this.isUnlicensed&&this.$addons.isActive(this.addonSlug)&&!this.$addons.requiresUpgrade(this.addonSlug)&&this.$addons.hasMinimumVersion(this.addonSlug)},shouldShowActivate(){return!this.isUnlicensed&&!this.$addons.isActive(this.addonSlug)&&this.$addons.canActivate(this.addonSlug)&&!this.$addons.requiresUpgrade(this.addonSlug)&&(this.$addons.hasMinimumVersion(this.addonSlug)||!this.$addons.isInstalled(this.addonSlug))},shouldShowUpdate(){return!this.isUnlicensed&&this.$addons.isInstalled(this.addonSlug)&&!this.$addons.requiresUpgrade(this.addonSlug)&&!this.$addons.hasMinimumVersion(this.addonSlug)},shouldShowLite(){return this.isUnlicensed||this.$addons.requiresUpgrade(this.addonSlug)}}},C={computed:{...n(["networkData"]),getSites(){return JSON.parse(JSON.stringify(this.networkData.sites.sites))},getSitesIds(){return Array.from(this.getSites,t=>this.getUniqueSiteId(t))},inactiveSitesIds(){return m(this.getSitesIds,this.activeSitesIds)},activeSitesIds(){const t=[];return this.getSites.forEach(e=>{this.networkData.activeSites.some(s=>s.domain===e.domain&&s.path===e.path)&&t.push(this.getUniqueSiteId(e))}),t}},methods:{getUniqueSiteId(t){return`${t.blog_id}_${t.domain}_${t.path}`},getMainSite(){let t=null;return this.getSites.forEach(e=>{this.isMainSite(e.domain,e.path)&&(t=e)}),t},isMainSite(t,e){return(this.$aioseo.urls.mainSiteUrl+"/").includes(`${this.$aioseo.data.isSsl?"https":"http"}://${t}${e}`)},getSiteByDomainAndPath(t,e){return this.getSites.find(s=>s.domain===t&&s.path===e)},getSiteByUniqueId(t){return this.getSites.find(e=>this.getUniqueSiteId(e)===t)},getActiveSiteByUniqueId(t){const e=this.getSiteByUniqueId(t);return e?this.networkData.activeSites.find(s=>s.domain===e.domain&&s.path===e.path):null},isSiteActive(t){return this.activeSitesIds.includes(this.getUniqueSiteId(t))},parseSiteValue(t){const e=[];return t.forEach(s=>{e.push(this.getSiteByUniqueId(s))}),e}}},I={data(){return{strings:{notifications:this.$t.__("Notifications",this.$td),newNotifications:this.$t.__("New Notifications",this.$td),activeNotifications:this.$t.__("Active Notifications",this.$td)}}},computed:{...o(["activeNotifications","activeNotificationsCount","dismissedNotifications","dismissedNotificationsCount"]),notificationsCount(){return this.dismissed?this.dismissedNotificationsCount:this.activeNotificationsCount},notifications(){return this.dismissed?this.dismissedNotifications:this.activeNotifications},notificationTitle(){return this.dismissed?this.strings.notifications:this.strings.newNotifications}},methods:{...u(["toggleDismissedNotifications","toggleNotifications"])}},B={methods:{...l(["saveChanges","saveHtaccess","saveNetworkRobots"]),processSaveChanges(){this.$store.commit("loading",!0);let t=!1,e=!1,s="saveChanges";setTimeout(()=>{t=!0,e&&this.$store.commit("loading",!1)},1500),this.$store.state.route.name==="htaccess-editor"&&(s="saveHtaccess",this.$store.commit("setHtaccessError",null)),this.$aioseo.data.isNetworkAdmin&&this.$store.state.route.name==="robots-editor"&&(s="saveNetworkRobots"),this[s]().then(i=>{i&&i.body.redirection||(t||this.$store.state.route.name==="htaccess-editor"?this.$store.commit("loading",!1):e=!0,this.$bus.$emit("changes-saved"))})}}},P={computed:{...n(["currentPost","tags"]),...n("live-tags",["liveTags"])},methods:{truncate(t,e=200){return t&&(e<t.length?t.substr(0,e-1)+this.$tags.decodeHTMLEntities("&hellip;"):t)},parseTags(t){return!t||!this.tags.tags?t:(this.tags.tags.forEach(e=>{if(e.id==="custom_field"){const a=new RegExp(`#${e.id}-([a-zA-Z0-9_-]+)`),d=t.match(a);d&&d[1]&&(t=t.replace(a,_(d[1])));return}if(e.id==="tax_name"){const a=new RegExp(`#${e.id}-([a-zA-Z0-9_-]+)`,"g");t=t.replace(a,`[${e.name} - $1]`);return}const s=new RegExp(`#${e.id}(?![a-zA-Z0-9_])`,"g");e.id==="separator_sa"&&this.separator!==void 0&&(t=t.replace(s,this.separator));const i=t.match(s),r=this.liveTags[e.id]||e.value;i&&(t=t.replace(s,"%|%"+r)),this.$set(e,"value",r);const{tags:g}=window.aioseo.tags,h=g.find(a=>a.id===e.id);h&&this.$set(h,"value",r)}),t=t.replace(/%\|%/g,""),this.$tags.decodeHTMLEntities(this.$tags.decodeHTMLEntities(t.replace(/<(?:.|\n)*?>/gm," ").replace(/\s/g," "))))}}},L={computed:{...o(["isUnlicensed"]),toolsSettings(){const t=[{value:"webmasterTools",label:this.$t.__("Webmaster Tools",this.$td),access:"aioseo_general_settings"},{value:"rssContent",label:this.$t.__("RSS Content",this.$td),access:"aioseo_general_settings"},{value:"advanced",label:this.$t.__("Advanced",this.$td),access:"aioseo_general_settings"},{value:"searchAppearance",label:this.$t.__("Search Appearance",this.$td),access:"aioseo_search_appearance_settings"},{value:"social",label:this.$t.__("Social Networks",this.$td),access:"aioseo_social_networks_settings"},{value:"sitemap",label:this.$t.__("Sitemaps",this.$td),access:"aioseo_sitemap_settings"},{value:"robots",label:this.$t.__("Robots.txt",this.$td),access:"aioseo_tools_settings"},{value:"breadcrumbs",label:this.$t.__("Breadcrumbs",this.$td),access:"aioseo_general_settings"}];return window.aioseo.internalOptions.internal.deprecatedOptions.includes("badBotBlocker")&&t.push({value:"blocker",label:this.$t.__("Bad Bot Blocker",this.$td),access:"aioseo_tools_settings"}),this.$isPro&&t.push({value:"accessControl",label:this.$t.__("Access Control",this.$td),access:"aioseo_admin"}),!this.isUnlicensed&&this.showImageSeoReset&&t.push({value:"image",label:this.$t.__("Image SEO",this.$td),access:"aioseo_search_appearance_settings"}),!this.isUnlicensed&&this.showLocalBusinessReset&&t.push({value:"localBusiness",label:this.$t.__("Local Business SEO",this.$td),access:"aioseo_local_seo_settings"}),!this.isUnlicensed&&this.showRedirectsReset&&t.push({value:"redirects",label:this.$t.__("Redirects",this.$td),access:"aioseo_redirects_settings"}),!this.isUnlicensed&&this.showLinkAssistantReset&&t.push({value:"linkAssistant",label:this.$t.__("Link Assistant",this.$td),access:"aioseo_link_assistant_settings"}),t.filter(e=>this.$allowed(e.access))},showImageSeoReset(){const t=this.$addons.getAddon("aioseo-image-seo");return t&&t.isActive&&!t.requiresUpgrade},showLocalBusinessReset(){const t=this.$addons.getAddon("aioseo-local-business");return t&&t.isActive&&!t.requiresUpgrade},showRedirectsReset(){const t=this.$addons.getAddon("aioseo-redirects");return t&&t.isActive&&!t.requiresUpgrade},showLinkAssistantReset(){const t=this.$addons.getAddon("aioseo-link-assistant");return t&&t.isActive&&!t.requiresUpgrade}}};var $=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:"modal"}},[s("div",{class:[{"aioseo-app":t.isolate}].concat(t.classes)},[s("div",{staticClass:"modal-mask"},[s("div",{staticClass:"modal-wrapper"},[s("div",{staticClass:"modal-container"},[t.noHeader?t._e():s("div",{staticClass:"modal-header"},[t._t("header",function(){return[t._t("headerTitle"),s("button",{staticClass:"close",on:{click:function(i){return i.stopPropagation(),t.$emit("close")}}},[s("svg-close",{on:{click:function(i){return t.$emit("close")}}})],1)]})],2),s("div",{staticClass:"modal-body",class:{"allow-overflow":t.allowBodyOverflow}},[t._t("body")],2)])])])])])},v=[];const S={components:{SvgClose:p},props:{noHeader:Boolean,isolate:Boolean,classes:Array,allowBodyOverflow:Boolean},methods:{scrollToElement(){const t=this.$el.getElementsByClassName("component-wrapper")[0];setTimeout(()=>{t&&(t.firstChild.scrollTop=0)},10)}},mounted(){this.scrollToElement(),this.isolate&&document.body.appendChild(this.$el)}},c={};var b=f(S,$,v,!1,w,null,null,null);function w(t){for(let e in c)this[e]=c[e]}const T=function(){return b.exports}(),R={data(){return{strings:{skipThisStep:this.$t.__("Skip this Step",this.$td),goBack:this.$t.__("Go Back",this.$td),saveAndContinue:this.$t.__("Save and Continue",this.$td)}}},computed:{...o("wizard",["getNextLink","getPrevLink"]),...o(["isUnlicensed"]),features(){return[...this.$constants.WIZARD_FEATURES]},getSelectedUpsellFeatures(){return this.presetFeatures?this.presetFeatures.filter(t=>this.needsUpsell(this.features.find(e=>e.value===t))).map(t=>this.features.find(e=>e.value===t)):[]}},methods:{...u("wizard",["setCurrentStage"]),needsUpsell(t){return t.pro?!!(this.isUnlicensed||t.upgrade&&this.$addons.requiresUpgrade(t.upgrade)):!1}},mounted(){this.setCurrentStage(this.stage)}},D={components:{CoreModal:T,SvgClose:p},data(){return{loading:!1,showModal:!1,strings:{closeAndExit:this.$t.__("Close and Exit Wizard Without Saving",this.$td),buildABetterAioseo:this.$t.sprintf(this.$t.__("Build a Better %1$s",this.$td),"AIOSEO"),getImprovedFeatures:this.$t.sprintf(this.$t.__("Get improved features and faster fixes by sharing non-sensitive data via usage tracking that shows us how %1$s is being used. No personal data is tracked or stored.",this.$td),"AIOSEO"),noThanks:this.$t.__("No thanks",this.$td),yesCountMeIn:this.$t.__("Yes, count me in!",this.$td)}}},computed:{...n("wizard",["smartRecommendations"])},methods:{...l("wizard",["saveWizard"]),processOptIn(){this.smartRecommendations.usageTracking=!0,this.loading=!0,this.saveWizard("smartRecommendations").then(()=>{window.location.href=this.$aioseo.urls.aio.dashboard})}}},E={data(){return{resultsPerPage:20,orderBy:null,orderDir:"asc",searchTerm:null,pageNumber:1,filter:"all",wpTableKey:0,wpTableLoading:!1}},methods:{...l(["changeItemsPerPage"]),refreshTable(){return this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1)},processAdditionalFilters({filters:t}){this.wpTableLoading=!0,this.processFetchTableData(t).then(()=>this.wpTableLoading=!1)},processSearch(t){this.pageNumber=1,this.searchTerm=t,this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1)},processPagination(t){this.pageNumber=t,this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1)},processFilterTable(t){this.filter=t.slug,this.searchTerm=null,this.pageNumber=1,this.wpTableLoading=!0,this.resetSelectedFilters(),this.processFetchTableData().then(()=>this.wpTableLoading=!1)},processChangeItemsPerPage(t){this.pageNumber=1,this.resultsPerPage=t,this.wpTableLoading=!0,this.changeItemsPerPage({slug:this.changeItemsPerPageSlug,value:t}).then(()=>this.processFetchTableData().then(()=>this.$scrollTo(`#${this.tableId}`,{offset:-110}))).then(()=>this.wpTableLoading=!1)},processSort(t,e){e.target.blur(),this.orderBy=t.slug,this.orderDir=this.orderBy!==t.slug?t.sortDir:t.sortDir==="asc"?"desc":"asc",this.wpTableLoading=!0,this.processFetchTableData().then(()=>this.wpTableLoading=!1)},processFetchTableData(t){return this.fetchData({slug:this.slug||null,orderBy:this.orderBy,orderDir:this.orderDir,limit:this.resultsPerPage,offset:this.pageNumber===1?0:(this.pageNumber-1)*this.resultsPerPage,searchTerm:this.searchTerm,filter:this.filter,additionalFilters:t||this.selectedFilters})},resetSelectedFilters(){}},created(){this.resultsPerPage=this.$aioseo.settings.tablePagination[this.changeItemsPerPageSlug]||this.resultsPerPage}};export{y as A,T as C,I as N,B as S,P as T,E as W,R as a,D as b,C as c,L as d};
